import json
import matplotlib.pyplot as plt

def visualize_nmap_results(nmap_data):
    hosts = []
    open_ports = []

    for host_data in nmap_data:
        hosts.append(host_data['host'])
        open_ports.append(len(host_data['open_ports']))

    plt.figure(figsize=(10, 6))
    plt.bar(hosts, open_ports, color='blue')
    plt.title('Open Ports Per Host')
    plt.xlabel('Host')
    plt.ylabel('Number of Open Ports')
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.show()

if __name__ == "__main__":
    # Example JSON data (replace this with actual Nmap data)
    nmap_results = [
        {"host": "192.168.1.1", "open_ports": [22, 80, 443]},
        {"host": "192.168.1.2", "open_ports": [80, 443]},
        {"host": "192.168.1.3", "open_ports": [22, 23, 80, 443]}
    ]

    visualize_nmap_results(nmap_results)
